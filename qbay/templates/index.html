{% extends 'base.html' %}

{% block header %}
<h1>{% block title %}Profile{% endblock %}</h1>
{% endblock %}

{% block content %}
<h2 id="welcome-header">Welcome {{ user.username }}!</h2>

<div style="height:4em">
    <h2 style="width:fit-content; float:left">Here are all available products</h2>
    <a class="btn btn-primary" style="float:right" id='product-create' href='/product/create'>Sell a Product</a>
</div>
<br/>
<div id="products">
    <h3>Available products</h3>
    {% for product in otherProducts %}
    <div>
        <h4>
            <form action="?product={{product.id}}" method='post'>
                {{ product.productName }} 
                <input type="submit" class="buy-btn" value="Buy" style="float:right;"/>
                <span style="float:right; margin-right:5em">${{ product.price }}</span>
                <span style="float:right; margin-right:1em">Seller: {{ product.user.username }}</span>
            </form>
        </h4>
    </div> 
    {% endfor %}
    <h3>Your Products</h3>
    {% for product in user.products %}
    <div>
        <h4>
            {{ product.productName }} 
            <a href='/product/update/{{product.productName}}' style="float:right">update</a>
            <span style="float:right; margin-right:5em">${{ product.price }}</span>
            
        </h4>
    </div>
    {% endfor %}
    <h3>Purchase History</h3>
    {% for product in user.products %}
    <div>
        <h4>
            {{ product.productName }} 
            <a href='/product/update/{{product.productName}}' style="float:right">update</a>
            <span style="float:right; margin-right:5em">${{ product.price }}</span>
            
        </h4>
    </div>
    {% endfor %}
</div>
<br/><br/>
<div>
    <h3>Shipping Information</h3>
    <p id="shipping">Shipping address: {{user.shippingAddress}}</p>
    <p id="postal">Postal Code: {{user.postalCode}}</p>
</div>
<a href="/user/modify">Update Profile</a>

<style>

.buy-btn {
    background-color: rgb(142, 55, 140);
    color: white;
    border-radius: 7px;
};

</style>


{% endblock %}